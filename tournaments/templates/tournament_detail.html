{% extends "tournaments.html" %}
{% load static %}
{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/tournament_detail.css' %}" />
<link rel="stylesheet" href="{% static 'css/resultTable.css' %}" />
<script src="{% static 'js/tournament_detail.js' %}" defer></script>
<script src="{% static 'js/admin/tournament_view.js' %}" defer></script>
{% endblock extrahead %}
{% block header %}
{% include 'header/log.html' %}
<header class=" navbar">
    {% include 'header/navbar.html' %}
</header>
    
{% endblock %}
{% block content %}
<div class="body">
    <div class="tournament_info">
        <h1> {{torneo.nombre_torneo}} </h1>
        <div class='tournament__info__image blur'>
            <img src="{{torneo.imagen_banner.url}}" alt="imagen del torneo" />
        </div>
        <div class="description">
            <h2>Descripcion</h2>
            <p> {{ torneo.descripcion }} </p>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur deserunt neque id temporibus. Ea ad saepe adipisci blanditiis? Harum quo voluptatem aut sint iusto in ab rem laboriosam facere repellendus.</p>
        </div>

        <section class="accordion">
            <div class="accordion_item">
                <h4 class="accordion_header">Reglas</h4>
                <ul class="accordion_content">
                    {% for rule in reglas %}
                    <li> {{rule}} </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="accordion_item">
                <h4 class="accordion_header">Jugadores Inscritos</h4>
                <ul class="accordion_content">
                    {% for player in players %}
                    <li> {{player}} </li>
                    {% endfor %}
                </ul>
            </div>
        </section>
    </div>
    {% if svg_data %}
    <div class="svg_container blur">
        {{svg_data|safe}}
    </div>
    {% if torneo.modo_torneo == 'Round' %}
    <div class = "standings__container" id =>
        <table id = "standings_table">
            <thead>
                <tr>
                    <th>Ranking</th>
                    <th>Jugador</th>
                    <th>Partidos ganados</th>
                    <th>Partidos perdidos</th>
                    <th>Partidos empatados</th>
                    <th>Puntuaci√≥n</th>
                    <th>Goles</th>
                <tr>
            </thead>
            <tbody>
                {% for player in players %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ player }}</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
        {% endif %}
    {% else %}
    <div class="formulario_ingreso">
        {% if user.is_authenticated %}
        <div class="already_authenticated">
            <h3> Ya esta registrado, deseas inscribirte a este torneo usando el correo: {{user.email}}</h3>
            <a href="#" class="login__button"> Inscribirme </a>
        </div>
        {% else %}
        <div class="guest_form">
            <form class="form">
                <legend> Registrarse a {{torneo.nombre_torneo}} como invitado</legend>
                <div class="form-group">
                    <label for="playerName">Nombre de jugador</label>
                    <input type="text" id="playerName" name="playerName" required="">
                </div>
                <div class="form-group">
                    <label for="tel">Numero de telefono</label>
                    <input type="tel" id="tel" name="tel" required="">
                </div>
                <div class="form_bottom">
                    <button class="form-submit-btn" type="submit">Submit</button>

                    <a class="signup" href="{% url 'account_login' %}" class="">Ya tienes cuenta?</a>

                </div>
            </form>
        </div>
        {% endif %}
    </div>
    {% endif %}

</div>
{% endblock content %}